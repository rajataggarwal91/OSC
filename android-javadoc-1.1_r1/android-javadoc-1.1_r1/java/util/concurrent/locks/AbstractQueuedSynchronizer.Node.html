<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!--NewPage-->
<HTML>
<HEAD>
<!-- Generated by javadoc (build 1.6.0_10) on Wed Feb 11 14:18:30 MSK 2009 -->
<TITLE>
AbstractQueuedSynchronizer.Node
</TITLE>

<META NAME="date" CONTENT="2009-02-11">

<LINK REL ="stylesheet" TYPE="text/css" HREF="../../../../stylesheet.css" TITLE="Style">

<SCRIPT type="text/javascript">
function windowTitle()
{
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="AbstractQueuedSynchronizer.Node";
    }
}
</SCRIPT>
<NOSCRIPT>
</NOSCRIPT>

</HEAD>

<BODY BGCOLOR="white" onload="windowTitle();">
<HR>


<!-- ========= START OF TOP NAVBAR ======= -->
<A NAME="navbar_top"><!-- --></A>
<A HREF="#skip-navbar_top" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_top_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="class-use/AbstractQueuedSynchronizer.Node.html"><FONT CLASS="NavBarFont1"><B>Use</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../index-files/index-1.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
<b>Build&nbsp;1.1_r1 (from&nbsp;source)</b></EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../../java/util/concurrent/locks/AbstractQueuedSynchronizer.ConditionObject.html" title="class in java.util.concurrent.locks"><B>PREV CLASS</B></A>&nbsp;
&nbsp;<A HREF="../../../../java/util/concurrent/locks/Condition.html" title="interface in java.util.concurrent.locks"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../../index.html?java/util/concurrent/locks/AbstractQueuedSynchronizer.Node.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="AbstractQueuedSynchronizer.Node.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;NESTED&nbsp;|&nbsp;<A HREF="#field_summary">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_summary">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;<A HREF="#field_detail">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_detail">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_top"></A>
<!-- ========= END OF TOP NAVBAR ========= -->

<HR>
<!-- ======== START OF CLASS DATA ======== -->
<H2>
<FONT SIZE="-1">
java.util.concurrent.locks</FONT>
<BR>
Class AbstractQueuedSynchronizer.Node</H2>
<PRE>
<A HREF="../../../../java/lang/Object.html" title="class in java.lang">java.lang.Object</A>
  <IMG SRC="../../../../resources/inherit.gif" ALT="extended by "><B>java.util.concurrent.locks.AbstractQueuedSynchronizer.Node</B>
</PRE>
<DL>
<DT><B>Enclosing class:</B><DD><A HREF="../../../../java/util/concurrent/locks/AbstractQueuedSynchronizer.html" title="class in java.util.concurrent.locks">AbstractQueuedSynchronizer</A></DD>
</DL>
<HR>
<DL>
<DT><PRE>static final class <B>AbstractQueuedSynchronizer.Node</B><DT>extends <A HREF="../../../../java/lang/Object.html" title="class in java.lang">Object</A></DL>
</PRE>

<P>
Wait queue node class.

 <p> The wait queue is a variant of a "CLH" (Craig, Landin, and
 Hagersten) lock queue. CLH locks are normally used for
 spinlocks.  We instead use them for blocking synchronizers, but
 use the same basic tactic of holding some of the control
 information about a thread in the predecessor of its node.  A
 "status" field in each node keeps track of whether a thread
 should block.  A node is signalled when its predecessor
 releases.  Each node of the queue otherwise serves as a
 specific-notification-style monitor holding a single waiting
 thread. The status field does NOT control whether threads are
 granted locks etc though.  A thread may try to acquire if it is
 first in the queue. But being first does not guarantee success;
 it only gives the right to contend.  So the currently released
 contender thread may need to rewait.

 <p>To enqueue into a CLH lock, you atomically splice it in as new
 tail. To dequeue, you just set the head field.  
 <pre>
      +------+  prev +-----+       +-----+
 head |      | <---- |     | <---- |     |  tail
      +------+       +-----+       +-----+
 </pre>

 <p>Insertion into a CLH queue requires only a single atomic
 operation on "tail", so there is a simple atomic point of
 demarcation from unqueued to queued. Similarly, dequeing
 involves only updating the "head". However, it takes a bit
 more work for nodes to determine who their successors are,
 in part to deal with possible cancellation due to timeouts
 and interrupts.

 <p>The "prev" links (not used in original CLH locks), are mainly
 needed to handle cancellation. If a node is cancelled, its
 successor is (normally) relinked to a non-cancelled
 predecessor. For explanation of similar mechanics in the case
 of spin locks, see the papers by Scott and Scherer at
 http://www.cs.rochester.edu/u/scott/synchronization/
 
 <p>We also use "next" links to implement blocking mechanics.
 The thread id for each node is kept in its own node, so a
 predecessor signals the next node to wake up by traversing
 next link to determine which thread it is.  Determination of
 successor must avoid races with newly queued nodes to set
 the "next" fields of their predecessors.  This is solved
 when necessary by checking backwards from the atomically
 updated "tail" when a node's successor appears to be null.
 (Or, said differently, the next-links are an optimization
 so that we don't usually need a backward scan.)

 <p>Cancellation introduces some conservatism to the basic
 algorithms.  Since we must poll for cancellation of other
 nodes, we can miss noticing whether a cancelled node is
 ahead or behind us. This is dealt with by always unparking
 successors upon cancellation, allowing them to stabilize on
 a new predecessor.

 <p>CLH queues need a dummy header node to get started. But
 we don't create them on construction, because it would be wasted
 effort if there is never contention. Instead, the node
 is constructed and head and tail pointers are set upon first
 contention.

 <p>Threads waiting on Conditions use the same nodes, but
 use an additional link. Conditions only need to link nodes
 in simple (non-concurrent) linked queues because they are
 only accessed when exclusively held.  Upon await, a node is
 inserted into a condition queue.  Upon signal, the node is
 transferred to the main queue.  A special value of status
 field is used to mark which queue a node is on.

 <p>Thanks go to Dave Dice, Mark Moir, Victor Luchangco, Bill
 Scherer and Michael Scott, along with members of JSR-166
 expert group, for helpful ideas, discussions, and critiques
 on the design of this class.
<P>

<P>
<HR>

<P>
<!-- =========== FIELD SUMMARY =========== -->

<A NAME="field_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Field Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>(package private) static&nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../java/util/concurrent/locks/AbstractQueuedSynchronizer.Node.html#CANCELLED">CANCELLED</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;waitStatus value to indicate thread has cancelled</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>(package private) static&nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../java/util/concurrent/locks/AbstractQueuedSynchronizer.Node.html#CONDITION">CONDITION</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;waitStatus value to indicate thread is waiting on condition</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>(package private) static&nbsp;<A HREF="../../../../java/util/concurrent/locks/AbstractQueuedSynchronizer.Node.html" title="class in java.util.concurrent.locks">AbstractQueuedSynchronizer.Node</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../java/util/concurrent/locks/AbstractQueuedSynchronizer.Node.html#EXCLUSIVE">EXCLUSIVE</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Marker to indicate a node is waiting in exclusive mode</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>(package private) &nbsp;<A HREF="../../../../java/util/concurrent/locks/AbstractQueuedSynchronizer.Node.html" title="class in java.util.concurrent.locks">AbstractQueuedSynchronizer.Node</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../java/util/concurrent/locks/AbstractQueuedSynchronizer.Node.html#next">next</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Link to the successor node that the current node/thread
 unparks upon release.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>(package private) &nbsp;<A HREF="../../../../java/util/concurrent/locks/AbstractQueuedSynchronizer.Node.html" title="class in java.util.concurrent.locks">AbstractQueuedSynchronizer.Node</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../java/util/concurrent/locks/AbstractQueuedSynchronizer.Node.html#nextWaiter">nextWaiter</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Link to next node waiting on condition, or the special
 value SHARED.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>(package private) &nbsp;<A HREF="../../../../java/util/concurrent/locks/AbstractQueuedSynchronizer.Node.html" title="class in java.util.concurrent.locks">AbstractQueuedSynchronizer.Node</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../java/util/concurrent/locks/AbstractQueuedSynchronizer.Node.html#prev">prev</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Link to predecessor node that current node/thread relies on
 for checking waitStatus.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>(package private) static&nbsp;<A HREF="../../../../java/util/concurrent/locks/AbstractQueuedSynchronizer.Node.html" title="class in java.util.concurrent.locks">AbstractQueuedSynchronizer.Node</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../java/util/concurrent/locks/AbstractQueuedSynchronizer.Node.html#SHARED">SHARED</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Marker to indicate a node is waiting in shared mode</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>(package private) static&nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../java/util/concurrent/locks/AbstractQueuedSynchronizer.Node.html#SIGNAL">SIGNAL</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;waitStatus value to indicate thread needs unparking</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>(package private) &nbsp;<A HREF="../../../../java/lang/Thread.html" title="class in java.lang">Thread</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../java/util/concurrent/locks/AbstractQueuedSynchronizer.Node.html#thread">thread</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The thread that enqueued this node.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>(package private) &nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../java/util/concurrent/locks/AbstractQueuedSynchronizer.Node.html#waitStatus">waitStatus</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Status field, taking on only the values:
   SIGNAL:     The successor of this node is (or will soon be) 
               blocked (via park), so the current node must 
               unpark its successor when it releases or 
               cancels.</TD>
</TR>
</TABLE>
&nbsp;
<!-- ======== CONSTRUCTOR SUMMARY ======== -->

<A NAME="constructor_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Constructor Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><B><A HREF="../../../../java/util/concurrent/locks/AbstractQueuedSynchronizer.Node.html#AbstractQueuedSynchronizer.Node()">AbstractQueuedSynchronizer.Node</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><B><A HREF="../../../../java/util/concurrent/locks/AbstractQueuedSynchronizer.Node.html#AbstractQueuedSynchronizer.Node(java.lang.Thread, java.util.concurrent.locks.AbstractQueuedSynchronizer.Node)">AbstractQueuedSynchronizer.Node</A></B>(<A HREF="../../../../java/lang/Thread.html" title="class in java.lang">Thread</A>&nbsp;thread,
                                <A HREF="../../../../java/util/concurrent/locks/AbstractQueuedSynchronizer.Node.html" title="class in java.util.concurrent.locks">AbstractQueuedSynchronizer.Node</A>&nbsp;mode)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><B><A HREF="../../../../java/util/concurrent/locks/AbstractQueuedSynchronizer.Node.html#AbstractQueuedSynchronizer.Node(java.lang.Thread, int)">AbstractQueuedSynchronizer.Node</A></B>(<A HREF="../../../../java/lang/Thread.html" title="class in java.lang">Thread</A>&nbsp;thread,
                                int&nbsp;waitStatus)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
</TABLE>
&nbsp;
<!-- ========== METHOD SUMMARY =========== -->

<A NAME="method_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Method Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>(package private) &nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../java/util/concurrent/locks/AbstractQueuedSynchronizer.Node.html#isShared()">isShared</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns true if node is waiting in shared mode</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>(package private) &nbsp;<A HREF="../../../../java/util/concurrent/locks/AbstractQueuedSynchronizer.Node.html" title="class in java.util.concurrent.locks">AbstractQueuedSynchronizer.Node</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../java/util/concurrent/locks/AbstractQueuedSynchronizer.Node.html#predecessor()">predecessor</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns previous node, or throws NullPointerException if
 null.</TD>
</TR>
</TABLE>
&nbsp;<A NAME="methods_inherited_from_class_java.lang.Object"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#EEEEFF" CLASS="TableSubHeadingColor">
<TH ALIGN="left"><B>Methods inherited from class java.lang.<A HREF="../../../../java/lang/Object.html" title="class in java.lang">Object</A></B></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><A HREF="../../../../java/lang/Object.html#clone()">clone</A>, <A HREF="../../../../java/lang/Object.html#equals(java.lang.Object)">equals</A>, <A HREF="../../../../java/lang/Object.html#finalize()">finalize</A>, <A HREF="../../../../java/lang/Object.html#getClass()">getClass</A>, <A HREF="../../../../java/lang/Object.html#hashCode()">hashCode</A>, <A HREF="../../../../java/lang/Object.html#notify()">notify</A>, <A HREF="../../../../java/lang/Object.html#notifyAll()">notifyAll</A>, <A HREF="../../../../java/lang/Object.html#toString()">toString</A>, <A HREF="../../../../java/lang/Object.html#wait()">wait</A>, <A HREF="../../../../java/lang/Object.html#wait(long)">wait</A>, <A HREF="../../../../java/lang/Object.html#wait(long, int)">wait</A></CODE></TD>
</TR>
</TABLE>
&nbsp;
<P>

<!-- ============ FIELD DETAIL =========== -->

<A NAME="field_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Field Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="CANCELLED"><!-- --></A><H3>
CANCELLED</H3>
<PRE>
static final int <B>CANCELLED</B></PRE>
<DL>
<DD>waitStatus value to indicate thread has cancelled
<P>
<DL>
<DT><B>See Also:</B><DD><A HREF="../../../../constant-values.html#java.util.concurrent.locks.AbstractQueuedSynchronizer.Node.CANCELLED">Constant Field Values</A></DL>
</DL>
<HR>

<A NAME="SIGNAL"><!-- --></A><H3>
SIGNAL</H3>
<PRE>
static final int <B>SIGNAL</B></PRE>
<DL>
<DD>waitStatus value to indicate thread needs unparking
<P>
<DL>
<DT><B>See Also:</B><DD><A HREF="../../../../constant-values.html#java.util.concurrent.locks.AbstractQueuedSynchronizer.Node.SIGNAL">Constant Field Values</A></DL>
</DL>
<HR>

<A NAME="CONDITION"><!-- --></A><H3>
CONDITION</H3>
<PRE>
static final int <B>CONDITION</B></PRE>
<DL>
<DD>waitStatus value to indicate thread is waiting on condition
<P>
<DL>
<DT><B>See Also:</B><DD><A HREF="../../../../constant-values.html#java.util.concurrent.locks.AbstractQueuedSynchronizer.Node.CONDITION">Constant Field Values</A></DL>
</DL>
<HR>

<A NAME="SHARED"><!-- --></A><H3>
SHARED</H3>
<PRE>
static final <A HREF="../../../../java/util/concurrent/locks/AbstractQueuedSynchronizer.Node.html" title="class in java.util.concurrent.locks">AbstractQueuedSynchronizer.Node</A> <B>SHARED</B></PRE>
<DL>
<DD>Marker to indicate a node is waiting in shared mode
<P>
<DL>
</DL>
</DL>
<HR>

<A NAME="EXCLUSIVE"><!-- --></A><H3>
EXCLUSIVE</H3>
<PRE>
static final <A HREF="../../../../java/util/concurrent/locks/AbstractQueuedSynchronizer.Node.html" title="class in java.util.concurrent.locks">AbstractQueuedSynchronizer.Node</A> <B>EXCLUSIVE</B></PRE>
<DL>
<DD>Marker to indicate a node is waiting in exclusive mode
<P>
<DL>
</DL>
</DL>
<HR>

<A NAME="waitStatus"><!-- --></A><H3>
waitStatus</H3>
<PRE>
volatile int <B>waitStatus</B></PRE>
<DL>
<DD>Status field, taking on only the values:
   SIGNAL:     The successor of this node is (or will soon be) 
               blocked (via park), so the current node must 
               unpark its successor when it releases or 
               cancels. To avoid races, acquire methods must
               first indicate they need a signal, 
               then retry the atomic acquire, and then, 
               on failure, block.
   CANCELLED:  Node is cancelled due to timeout or interrupt
               Nodes never leave this state. In particular,
               a thread with cancelled node never again blocks.
   CONDITION:  Node is currently on a condition queue
               It will not be used as a sync queue node until
               transferred. (Use of this value here
               has nothing to do with the other uses
               of the field, but simplifies mechanics.)
   0:          None of the above

 The values are arranged numerically to simplify use.
 Non-negative values mean that a node doesn't need to
 signal. So, most code doesn't need to check for particular
 values, just for sign.

 The field is initialized to 0 for normal sync nodes, and
 CONDITION for condition nodes.  It is modified only using
 CAS.
<P>
<DL>
</DL>
</DL>
<HR>

<A NAME="prev"><!-- --></A><H3>
prev</H3>
<PRE>
volatile <A HREF="../../../../java/util/concurrent/locks/AbstractQueuedSynchronizer.Node.html" title="class in java.util.concurrent.locks">AbstractQueuedSynchronizer.Node</A> <B>prev</B></PRE>
<DL>
<DD>Link to predecessor node that current node/thread relies on
 for checking waitStatus. Assigned during enqueing, and nulled
 out (for sake of GC) only upon dequeuing.  Also, upon
 cancellation of a predecessor, we short-circuit while
 finding a non-cancelled one, which will always exist
 because the head node is never cancelled: A node becomes
 head only as a result of successful acquire. A
 cancelled thread never succeeds in acquiring, and a thread only
 cancels itself, not any other node.
<P>
<DL>
</DL>
</DL>
<HR>

<A NAME="next"><!-- --></A><H3>
next</H3>
<PRE>
volatile <A HREF="../../../../java/util/concurrent/locks/AbstractQueuedSynchronizer.Node.html" title="class in java.util.concurrent.locks">AbstractQueuedSynchronizer.Node</A> <B>next</B></PRE>
<DL>
<DD>Link to the successor node that the current node/thread
 unparks upon release. Assigned once during enqueuing, and
 nulled out (for sake of GC) when no longer needed.  Upon
 cancellation, we cannot adjust this field, but can notice
 status and bypass the node if cancelled.  The enq operation
 does not assign next field of a predecessor until after
 attachment, so seeing a null next field does not
 necessarily mean that node is at end of queue. However, if
 a next field appears to be null, we can scan prev's from
 the tail to double-check.
<P>
<DL>
</DL>
</DL>
<HR>

<A NAME="thread"><!-- --></A><H3>
thread</H3>
<PRE>
volatile <A HREF="../../../../java/lang/Thread.html" title="class in java.lang">Thread</A> <B>thread</B></PRE>
<DL>
<DD>The thread that enqueued this node.  Initialized on
 construction and nulled out after use.
<P>
<DL>
</DL>
</DL>
<HR>

<A NAME="nextWaiter"><!-- --></A><H3>
nextWaiter</H3>
<PRE>
<A HREF="../../../../java/util/concurrent/locks/AbstractQueuedSynchronizer.Node.html" title="class in java.util.concurrent.locks">AbstractQueuedSynchronizer.Node</A> <B>nextWaiter</B></PRE>
<DL>
<DD>Link to next node waiting on condition, or the special
 value SHARED.  Because condition queues are accessed only
 when holding in exclusive mode, we just need a simple
 linked queue to hold nodes while they are waiting on
 conditions. They are then transferred to the queue to
 re-acquire. And because conditions can only be exclusive,
 we save a field by using special value to indicate shared
 mode.
<P>
<DL>
</DL>
</DL>

<!-- ========= CONSTRUCTOR DETAIL ======== -->

<A NAME="constructor_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Constructor Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="AbstractQueuedSynchronizer.Node()"><!-- --></A><H3>
AbstractQueuedSynchronizer.Node</H3>
<PRE>
<B>AbstractQueuedSynchronizer.Node</B>()</PRE>
<DL>
</DL>
<HR>

<A NAME="AbstractQueuedSynchronizer.Node(java.lang.Thread, java.util.concurrent.locks.AbstractQueuedSynchronizer.Node)"><!-- --></A><H3>
AbstractQueuedSynchronizer.Node</H3>
<PRE>
<B>AbstractQueuedSynchronizer.Node</B>(<A HREF="../../../../java/lang/Thread.html" title="class in java.lang">Thread</A>&nbsp;thread,
                                <A HREF="../../../../java/util/concurrent/locks/AbstractQueuedSynchronizer.Node.html" title="class in java.util.concurrent.locks">AbstractQueuedSynchronizer.Node</A>&nbsp;mode)</PRE>
<DL>
</DL>
<HR>

<A NAME="AbstractQueuedSynchronizer.Node(java.lang.Thread, int)"><!-- --></A><H3>
AbstractQueuedSynchronizer.Node</H3>
<PRE>
<B>AbstractQueuedSynchronizer.Node</B>(<A HREF="../../../../java/lang/Thread.html" title="class in java.lang">Thread</A>&nbsp;thread,
                                int&nbsp;waitStatus)</PRE>
<DL>
</DL>

<!-- ============ METHOD DETAIL ========== -->

<A NAME="method_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Method Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="isShared()"><!-- --></A><H3>
isShared</H3>
<PRE>
final boolean <B>isShared</B>()</PRE>
<DL>
<DD>Returns true if node is waiting in shared mode
<P>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="predecessor()"><!-- --></A><H3>
predecessor</H3>
<PRE>
final <A HREF="../../../../java/util/concurrent/locks/AbstractQueuedSynchronizer.Node.html" title="class in java.util.concurrent.locks">AbstractQueuedSynchronizer.Node</A> <B>predecessor</B>()
                                           throws <A HREF="../../../../java/lang/NullPointerException.html" title="class in java.lang">NullPointerException</A></PRE>
<DL>
<DD>Returns previous node, or throws NullPointerException if
 null.  Use when predecessor cannot be null.
<P>
<DD><DL>

<DT><B>Returns:</B><DD>the predecessor of this node
<DT><B>Throws:</B>
<DD><CODE><A HREF="../../../../java/lang/NullPointerException.html" title="class in java.lang">NullPointerException</A></CODE></DL>
</DD>
</DL>
<!-- ========= END OF CLASS DATA ========= -->
<HR>


<!-- ======= START OF BOTTOM NAVBAR ====== -->
<A NAME="navbar_bottom"><!-- --></A>
<A HREF="#skip-navbar_bottom" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_bottom_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="class-use/AbstractQueuedSynchronizer.Node.html"><FONT CLASS="NavBarFont1"><B>Use</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../index-files/index-1.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
<b>Build&nbsp;1.1_r1 (from&nbsp;source)</b></EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../../java/util/concurrent/locks/AbstractQueuedSynchronizer.ConditionObject.html" title="class in java.util.concurrent.locks"><B>PREV CLASS</B></A>&nbsp;
&nbsp;<A HREF="../../../../java/util/concurrent/locks/Condition.html" title="interface in java.util.concurrent.locks"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../../index.html?java/util/concurrent/locks/AbstractQueuedSynchronizer.Node.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="AbstractQueuedSynchronizer.Node.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;NESTED&nbsp;|&nbsp;<A HREF="#field_summary">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_summary">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;<A HREF="#field_detail">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_detail">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_bottom"></A>
<!-- ======== END OF BOTTOM NAVBAR ======= -->

<HR>

</BODY>
</HTML>
